{"version":3,"file":"vue.js","sources":["../../src/observer/array.js","../../src/util.js","../../src/observer/dep.js","../../src/observer/index.js","../../src/state.js","../../src/compiler/parse.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/vdom/patch.js","../../src/observer/watcher.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/index.js","../../src/global-api/index.js","../../src/index.js"],"sourcesContent":["import { observe } from \".\";\n\n// 重写数组的方法, 拿到数组原型上的方法(原来的方法)\nlet oldArrayProtoMethods = Array.prototype;\n\n// 继承一下  arrayMethods.__proto__ = oldArrayProtoMethods\nexport let arrayMethods = Object.create(oldArrayProtoMethods);\n\n// 7个改变数组本身状态的方法\nlet methods = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'reverse',\n  'sort',\n  'splice'\n]\n\nmethods.forEach(method => {\n  arrayMethods[method] = function (...args) {\n    // 调用原来的方法\n    const result = oldArrayProtoMethods[method].apply(this, args) // this就是observe里的value\n    let inserted;\n    let ob = this.__ob__;\n    switch (method) {\n      // method中有新增元素的方法，要观测新增的元素，新增的是对象类型，应该再次被劫持\n      case 'push':\n      case 'unshift':  // 这俩个方法都是追加\n        inserted = args;\n        break;\n      case 'splice': // vue.$set的原理\n        // 删除、添加、修改的功能都有，第3个参数才是新增的值\n        inserted = args.slice(2); // arr.splice(0, 1, {a:1}) // 从第0个索引开始删除一个，新增一个对象\n      default:\n        break;\n    }\n    if (inserted) {\n      // 通过ob 把新增的对象也进行代理\n      ob.observeArray(inserted); // 给数组新增的值也要进行观测\n    }\n    return result\n  }\n})","export function proxy(vm, data, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[data][key]; // vm._data.a\n    },\n    set(newValue) { // vm.a = 100\n      vm[data][key] = newValue // vm._data.a = 100\n    }\n  })\n}\n\nexport function defineProperty(target, key, value) {\n  Object.defineProperty(target, key, {\n    enumerable: false, // 将此属性定义成不可枚举的,this.walk的时候，不会取到此属性\n    configurable: false, // 此属性不可编辑\n    value: value\n    // 会不停的调用defineReactive，将__ob__变成响应式的，this上有__ob__，会无限递归\n    // value.__ob__ = this //this是Observer实例， 自定义属性递归过程中，回去再去递归它的属性，会无限递归，不呢个这样写\n  })\n}\n\nexport const LIFECYCLE_HOOKS = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestroy',\n  'destroyed'\n]\nconst strats = {}\nstrats.data = function (parentVal, childVal) {\n  return childVal // 这里应该有合并data的策略\n}\nstrats.computed = function (parentVal, childVal) {\n  return childVal\n}\nstrats.watch = function (parentVal, childVal) {\n  return childVal\n}\n\n// 生命周期方法的合并\nfunction mergeHook(parentVal, childVal) {\n  if (childVal) {\n    if (parentVal) {\n      return parentVal.concat(childVal) // 爸爸和儿子进行拼接\n    } else {\n      // 只有儿子有\n      return [childVal] // 儿子转换成数组\n    }\n  } else {\n    return parentVal; // 儿子无，不合并了，采用父亲的\n  }\n}\nLIFECYCLE_HOOKS.forEach(hook => {\n  // 生命周期方法的合并\n  strats[hook] = mergeHook\n})\n// 全局mixin是父，new Vue传的options是子\nexport function mergeOptions(parent = {}, child) {\n  // console.log('mergeOptions---parent', parent)\n  // 遍历父亲，可能是父亲有 儿子没有\n  const options = {}\n  for (let key in parent) { // 父亲和儿子都有在这就处理了\n    console.log('mergeOptions---1', key)\n    mergeField(key)\n  }\n\n  // 儿子有父亲没有 在这处理\n  for (let key in child) { // 将儿子多的赋予到父亲上\n    if (!parent.hasOwnProperty(key)) {\n      console.log('mergeOptions---2', key)\n      mergeField(key)\n    }\n  }\n\n  function mergeField(key) { // 合并字段\n    // console.log('mergeField', mergeField)\n    // 根据key 不同的策略来进行合并\n    // {...parent[key] }\n    if (strats[key]) {\n      // 直接调策略中的合并方法，mergeHook\n      options[key] = strats[key](parent[key], child[key])\n    } else {\n      // 默认合并, 局部的覆盖全局的\n      options[key] = child[key]\n    }\n\n  }\n\n  return options\n}","export default class Dep {\n  constructor() {\n    this.subs = []\n  }\n  // get： 获取值，收集依赖，所有已经使用了的属性\n  depend() {\n    this.subs.push(Dep.target)\n  }\n  // set：设置值的时候\n  notify() {\n    this.subs.forEach(watcher => watcher.update())\n  }\n}\n\nDep.target = null // 静态属性，就一份\nexport function pushTarget(watcher) {\n  Dep.target = watcher // 保留watcher\n}\n\nexport function popTarget() {\n  Dep.target = null // 将变量删除\n}\n// 多对多的关系，一个属性有一个dep,每个属性都有一个dep，dep是用来收集watcher的\n// dep 可以存多个watcher vm.$watch也会产生一个watch，vm.$watch('name')\n// 一个watcher可以对应多个dep，渲染页面的watcher可以有多个属性既有name、又有age \n// 默认渲染的时候时候，都是渲染watcher 还可能用户定义vm.$watch('name')方法，都会存在dep里面","import { arrayMethods } from \"./array\";\nimport { defineProperty } from \"../util.js\";\nimport Dep from \"./dep\";\n\nclass Observer {\n  constructor(value) {\n    // 使用defineProperty 重新定义属性,\n    // 判断一个对象是否被观测过，看他有没有 __ob__这个属性(Observer的实例)，__ob__自定义属性，用来描述对象被观测过了\n    // 让其他地方能拿到实例的方法\n    defineProperty(value, '__ob__', this)\n\n\n    if (Array.isArray(value)) {\n      // 判断值是不是数组，希望调用 push shift unshift splice sort reverse pop\n      // 函数劫持、切片编程\n      value.__proto__ = arrayMethods\n      // 观测数组中的对象类型,对象变化也要做一些事\n      this.observeArray(value)\n    } else {\n      this.walk(value)\n    }\n  }\n  // 观测数组中的每一项\n  observeArray(value) {\n    value.forEach(item => {\n      observe(item); // 观测数组中的对象类型\n    })\n  }\n  // 观测对象上的每一项\n  walk(data) {\n    // 循环对象使用defineProperty进行定义\n    let keys = Object.keys(data); // 获取对象的key\n    keys.forEach(key => {\n      // console.log('walk--data', data, 'key', key)\n      defineReactive(data, key, data[key]); // Vue.util.defineReactive: 将数据定义成响应式的数据\n    })\n\n  }\n}\n// 封装 继承\n// observe(newValue) => value=newValue ==> value=observve(newValue)\nfunction defineReactive(data, key, value) {\n  observe(value); // 如果观测的对象的值也是对象，再进行观测\n\n  let dep = new Dep(); // 每个属性都有一个dep\n\n  // 当页面取值的时，说明这个值用来渲染了，将这个watcher和这个属性对应起来\n  Object.defineProperty(data, key, {\n    get() {\n      // console.log(\"用户获取值\", key, value)\n      if (Dep.target) { // target有值，说明正在渲染，让这个属性记住这个watcher\n        // 取值的时候，收集依赖\n        dep.depend()\n      }\n      return value\n    },\n    set(newValue) {\n      // console.log(\"用户设置值\", key, value)\n      if (newValue == value) return;\n      // data[key] = newValue; // 这样写会死循环，利用闭包就好了\n      observe(newValue); // 如果用户将值改为对象，继续监控\n      value = newValue\n\n      // 赋值的时候，依赖更新\n      dep.notify() // 异步更新， 防止频繁操作\n    }\n  })\n  // console.log(\"defineReactive\", 'data', data, 'key', key)\n}\n\nexport function observe(data) {\n  // console.log('observe-data', data)\n  // 观测的数据不能不是对象，并且不是null\n  if (typeof data !== 'object' || data === null) {\n    return data;\n  }\n  if (data.__ob__) {\n    // 对象上有__ob__属性，已经被观测过了\n    return data;\n  }\n  return new Observer(data)\n\n  // 只观测存在的属性 data:{ a:1, b:2} vm.c = 3 vm.$set\n  // 数组中更改索引和长度，无法被监控\n  // vm.a = {a:1} // 赋值的是个对象，也会进行观测\n  // 数组的$set用splice实现，对象就是重新 defineProperty\n}","import { observe } from \"./observer/index\";\nimport { proxy } from \"./util.js\";\n// 响应式状态初始化\nexport function initState(vm) { // vm.$options\n  // console.log('state.js-->vm', vm)\n  const opts = vm.$options;\n  if (opts.props) {\n    initProps(vm)\n  }\n  if (opts.methods) {\n    initMethods(vm)\n  }\n  if (opts.data) {\n    initData(vm)\n  }\n  if (opts.computed) {\n    initComputed(vm)\n  }\n  if (opts.watch) {\n    initWatch(vm)\n  }\n}\n\nfunction initProps() { }\nfunction initMethods() { }\n\nfunction initData(vm) { // 数据的初始化操作\n  let data = vm.$options.data\n  // vm能达到观测后的data\n  vm._data = data = typeof data == 'function' ? data.call(vm) : data;\n  // console.log('initData--->', data)\n  // 当去vm上取属性时，将属性的取值代理到vm._data上，取值时不用通过vm._data.arr去取\n  for (let key in data) {\n    proxy(vm, '_data', key)\n  }\n  // 数据的劫持劫持方案 对象object.defineProperty\n  // 数组 单独处理的\n  observe(data) // 让这个对象重新定义set 和 get，重写耗一些性能、对象里面套对象会去递归\n}\nfunction initComputed() { }\nfunction initWatch() { }","// src/core/util/lang.js\nconst unicodeRegExp = /a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD/\n\n// src/compiler/parser/html-parser.js\n// Regular Expressions for parsing tags and attributes\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/ // 匹配属性，aaa=\"aaa\" | aaa='aaa' | aaa=aaa\nconst dynamicArgAttribute = /^\\s*((?:v-[\\w-]+:|@|:|#)\\[[^=]+\\][^\\s\"'<>\\/=]*)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z${unicodeRegExp.source}]*` // 标签名: aaa-123aa\n// ?:匹配不捕获\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})` // 捕获标签 <my:xxx></my:xxx>\nconst startTagOpen = new RegExp(`^<${qnameCapture}`) // 标签开头的正则 捕获内容是标签名，开始标签部分，不包含开始标签的结尾。如 <div class=\"className\" ></div>，匹配的是 '<div class=\"className\"'\nconst startTagClose = /^\\s*(\\/?)>/ // 匹配 > 标签 或者/> <div> <br/> 开始标签的结尾部分。如 <div class=\"className\" ></div>，匹配的是 ' >'\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`) // '</div><p></p>' 匹配结果为 </div>\nconst doctype = /^<!DOCTYPE [^>]+>/i // 匹配 DOCTYPE\nconst comment = /^<!\\--/ // 匹配注释\nconst conditionalComment = /^<!\\[/ // 匹配条件注释\nconst defaultTagRE = /\\{\\{((?:.|\\n)+?)\\}\\}/g // 匹配双大括号 {{  }}\nconst forAliasRE = /(.*?)\\s+(?:in|of)\\s+(.*)/\n\n\nexport function parseHTML(html) {\n\n  // 数据结构树 树、栈\n  function createASTElement(tagName, attrs) {\n    return {\n      tag: tagName, // 标签名\n      type: 1, // 元素类型\n      children: [], // 孩子列表\n      attrs, // 属性列表\n      parent: null // 父元素\n    }\n  }\n  let root; // 根节点\n  let currentParent; // 当前节点\n  let stack = [] // 存储标签的栈，用来判断栈是否符合预期\n  // 解析开始标签,并校验标签是否符合预期 <div><span></span></div> [div, span]\n  function start(tagName, attrs) {\n    // console.log('开始标签', 'tagName', tagName, 'attrs', attrs)\n    let element = createASTElement(tagName, attrs)\n    if (!root) {\n      root = element;\n    }\n    currentParent = element; // 当前解析的标签 保存起来\n    stack.push(element) // 将生成的ast元素放到栈中\n  }\n  // 解析结束标签(标签闭合的时候，才确定父子关系)\n  function end(tagName,) {\n    // console.log('结束标签-tagName', tagName)\n    // 在结尾标签处创建父子关系\n    let element = stack.pop(); // 取出栈中的最后一个\n    // <div><p></p> hello </div> [div, p] currentParent=p, 取出p后，currentParent就是div\n    currentParent = stack[stack.length - 1]\n    if (currentParent) {\n      // 在闭合时，取出标签，可以知道取出这个标签的父亲是谁\n      element.parent = currentParent\n      currentParent.children.push(element)\n    }\n\n\n  }\n\n  // 解析文本\n  function chars(text) {\n    // console.log('解析文本-text', text, \"currentParent\", currentParent)\n    text = text.replace(/\\s/g, '') // 去空格\n    if (text) {\n      currentParent.children.push({\n        type: 3, // 文本类型用3\n        text: text\n      })\n    }\n  }\n\n  while (html) { // 只要html不为空字符串，就一直解析\n    let textEnd = html.indexOf('<')\n    // 匹配到了标签的 \"<\"\n    if (textEnd == 0) { // v-bind v-on <!DOCTYPE <!---->  <br/> \n      //  肯定是标签\n      const startTagMatch = parseStartTag(); // 开始标签匹配的结果\n      if (startTagMatch) {\n        // 处理开始标签\n        start(startTagMatch.tagName, startTagMatch.attrs)\n      }\n      // console.log(\"匹配掉一个开始标签之后---html\", html)\n\n      const endTagMatch = html.match(endTag)\n      if (endTagMatch) {\n        // 处理结束标签\n        advance(endTagMatch[0].length)\n        end(endTagMatch[1]) // 将结束标签传入\n        continue;\n      }\n      // break;\n    }\n\n    let text = 0\n    if (textEnd >= 0) {\n      // 处理文本\n      text = html.substring(0, textEnd)\n    }\n    if (text) {\n      // 处理文本\n      advance(text.length)\n      chars(text);\n      // console.log('html--->text', html)\n    }\n    // break;\n\n\n  }\n\n  // 将匹配过的字符串进行截取操作，再进行更新html\n  function advance(n) {\n    html = html.substring(n)\n  }\n  // 解析标签\n  function parseStartTag() {\n    const start = html.match(startTagOpen)\n    if (start) {\n      // console.log(html, '匹配到的开始标签', start)\n      const match = {\n        tagName: start[1],\n        attrs: []\n      }\n      // console.log(\"match\", match)\n      advance(start[0].length);// 已经进行过匹配到的开始标签，删除掉\n      // console.log('删除后的html', html)\n      // 如果是闭合标签，说明没有属性\n      let end;\n      let attr;\n      // 不是单标签，且能匹配到属性\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n        // console.log('attr--->', attr)\n        match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] })\n        advance(attr[0].length) // 去掉当前已经匹配掉的属性\n        // console.log('match.attrs', match.attrs)\n        // break;\n      }\n      // console.log('匹配的结束标签结尾---end', end)\n      if (end) { // >\n        // console.log('匹配的结束标签结尾---end', end)\n        advance(end[0].length)\n        return match\n      }\n    }\n  }\n\n  return root\n}","// 编写: <div id=\"app\" style=\"color: red\"> hello {{name}} <span>hello</span></div>\n// 结果: render(){ return _c('div', {id: 'app', style:{color: 'red'}}), _v('hello'+_s(name)), _c('span', null, _v('hello'))}\n\nconst defaultTagRE = /\\{\\{((?:.|\\n)+?)\\}\\}/g // 匹配双大括号 {{  }}\n\n\n// 语法层面的转义\n// 将属性转换成key：value的形式\nfunction genProps(attrs) { // id=\"app\" / style=\"color:'red';fontSize:12px\"\n  // console.log('attrs--->', attrs)\n  let str = ''\n  for (let i = 0; i < attrs.length; i++) {\n    let attr = attrs[i]\n    if (attr.name === \"style\") {\n      let obj = {} // 对style上的样式进行特殊处理\n      attr.value.split(';').forEach(item => {\n        let [key, value] = item.split(':')\n        obj[key] = value\n      })\n      attr.value = obj\n    }\n    str += `${attr.name}:${JSON.stringify(attr.value)},`;\n\n  }\n\n  // 上面拼key-value的时候，会多出一个逗号\n  return `{${str.slice(0, -1)}}`;\n}\n\nfunction gen(node) {\n  // 节点可能是文本，可能是标签\n  if (node.type == 1) {\n    return generate(node) // 生成元素节点的字符串\n  } else {\n    // 如果是文本， 将当前节点的文本拿出来\n    let text = node.text // 获取文本\n    // 如果是普通文本，不带{{}}\n    if (!defaultTagRE.test(text)) {\n      // 1._v('hello') => _v('hello')\n      return `_v(${JSON.stringify(text)})`// 每次循环匹配代码之前，都要将正则的lastIndex置为0\n    }\n    // 2._v('hello {{name}} world {{msg}} aa') => _v('hello' + _s(name) + 'world' + _s(msg))\n    let tokens = []; // 存放每一段的代码\n    let lastIndex = defaultTagRE.lastIndex = 0; // 如果正则是全局模式 需要每次前置为0\n    let match, index; // 每次匹配到的结果\n\n    // 捕获 “{{name}}”\n    while (match = defaultTagRE.exec(text)) {\n      index = match.index // 保存匹配到的索引\n      if (index > lastIndex) {\n        // 当前是普通文班\n        tokens.push(JSON.stringify(text.slice(lastIndex, index)))\n      }\n      // 当前是'{{name}}',放入捕获到的变量名\n      tokens.push(`_s(${match[1].trim()})`)\n      lastIndex = index + match[0].length\n    }\n    if (lastIndex < text.length) {\n      tokens.push(JSON.stringify(text.slice(lastIndex))) // 示例最后的\"aa\"\n    }\n    return `_v(${tokens.join('+')})` // 2._v('hello {{name}} world {{msg}} aa') => _v('hello' + _s(name) + 'world' + _s(msg))\n  }\n}\n// 根据当前元素的儿子生成孩子\nfunction getChildren(el) {\n  const children = el.children // 儿子的生成\n  if (children) {\n    // 将所有转化后的儿子，用逗号拼接起来\n    return children.map(child => gen(child)).join(',')\n  }\n}\n\nexport function generate(el) {\n  let children = getChildren(el);\n  // 创建标签和标签的属性，将儿子拼到后面\n  let code = `_c('${el.tag}', ${\n    el.attrs.length ? `${genProps(el.attrs)}` : 'undefined'\n    }${\n    children ? `,${children}` : ''\n    })`;\n\n\n\n  return code\n}","// <div>hello {{name}} <span>world</span></div>\n// let html = {\n//   tag: 'div',\n//   parent: null,\n//   type: 1,\n//   attrs: [],\n//   children: [\n//     { tag: null, parent: '父div', attrs: [], text: 'hello {{name}}' },\n//     { tag: 'span', parent: '父div', attrs: [], text: 'world' },\n//   ]\n// }\nimport { parseHTML } from \"./parse\";\nimport { generate } from \"./generate\";\n\n// 解析html，重新生成代码，生成render函数\nexport function compileToFunctions(template) {\n  // 将html模板 ==》 render函数\n  // ast语法树：用一颗树描述html结构，再把这样一个结构转换成js语法，最后生成对应的代码字符串 \n  // 虚拟dom和ast：一个对语法转义，一个对结构转义，ast可以描述css、js、dom，虚拟dom只能描述dom结构\n  // 虚拟dom 是用对象来描述节点，避免操作真实dom，来比对的； ast是描述代码的，描述语言本身,只描述语法：const a = 1; ==> {indentifier: const, name: a, value: 1}\n  // <div id=\"a\"></div> ===> {attrs:[{id:'a'}], tag:'div', children:[]}\n\n  // 1.需要将html代码转化成\"ast\"语法树 可以用ast树来描述语言本身，\n\n  // 前端必须要掌握的数据结构（树）\n  // 测试 render 函数的节点\n  // template = `<div id=\"app\" style=\"color: red\"> hello {{name}} {{msg}} <span>hello</span></div>`\n  let ast = parseHTML(template)\n  // console.log('compileToFunctions', 'template', template, 'ast', ast)\n\n  // 2.优化静态节点\n\n  // 3.通过这颗树 重新生成代码\n  // <div id=\"app\" style=\"color: red\"> hello {{name}} <span>hello</span></div>\n  // render(){ return _c('div', {id: 'app', style:{color: 'red'}}), _v('hello'+_s(name)), _c('span', null, _v('hello'))}\n  let code = generate(ast)\n  // console.log('generate-->code', code)\n\n  // 4.将字符串变成函数 限制取值范围 通过with来进行取值 稍后调用render函数就可以通过改变this 让这个函数内部取到结果\n  let render = new Function(`with(this){return ${code}}`)\n  // let obj = { a: 1, b: 2 }\n  // with (obj) { console.log(a, b) }\n  // console.log('render-->', render)\n\n  return render\n\n}","// 将虚拟节点转换成真实节点\nexport function patch(oldVnode, vnode) {\n  console.log('oldVnode', oldVnode, 'vnode', vnode)\n\n  // oldVnode => id#app vnode 我们根据模板产生的虚拟dom\n  let el = createElm(vnode); // 根据当前虚拟节点创建真实dom\n  let parentElm = oldVnode.parentNode // 获取老的app的父亲 =》 body\n  parentElm.insertBefore(el, oldVnode.nextSibling) // 当前的真实元素插入到app老节点的后面，不是body节点的最后面\n  parentElm.removeChild(oldVnode) // 删除老节点\n\n  return el\n}\n\n\n\nfunction createElm(vnode) {\n  let { tag, children, key, data, text } = vnode\n  if (typeof tag == 'string') { // 创建元素 放到vnode.el上\n    // 如果有标签说明是一个元素\n    vnode.el = document.createElement(tag);\n\n    // 只有元素才有属性\n    updateProperties(vnode)\n\n    // 遍历儿子，将儿子渲染后的结果扔到父亲中\n    children.forEach(child => {\n      vnode.el.appendChild(createElm(child))\n    })\n  } else { // 创建文本 放到vnode.el 上\n    vnode.el = document.createTextNode(text)\n  }\n  return vnode.el\n}\n\n// vue的渲染流程 =》 先初始化数据 =》将模板逆行编译 =》 render函数 =》 生成虚拟节点 =》 生成真实dom =》 更新到页面\n\n\nfunction updateProperties(vnode) {\n  let el = vnode.el\n  let newProps = vnode.data || {}\n\n  for (let key in newProps) {\n    if (key == \"style\") { // {color: red}\n      for (let styleName in newProps.style) {\n        el.style[styleName] = newProps.style[styleName]\n      }\n    } else if (key == 'class') {\n      el.className = el.class\n    } else {\n      el.setAttribute(key, newProps[key])\n    }\n  }\n}","let id = 0\nimport { pushTarget, popTarget } from \"./dep\";\nclass Watcher { // vm.$watch\n  // vm实例\n  // exprOrFn vm._update(vm._render())\n  constructor(vm, exprOrFn, cb, options) {\n    this.vm = vm\n    this.exprOrFn = exprOrFn\n    this.cb = cb\n    this.options = options\n    this.id = id++; // watcher的唯一标识\n\n    if (typeof exprOrFn === 'function') {\n      this.getter = exprOrFn\n    }\n\n    this.get() // 默认会调用get方法\n  }\n\n  get() {\n    // Dep.target = watcher\n    pushTarget(this) // 当前watcher实例\n    this.getter() // 调用exprOrFn  渲染页面 取值(执行了get方法)  render方法 with(vm){msg}\n    popTarget()\n  }\n  update() {\n    this.get() // 重新渲染\n  }\n}\n\n\nexport default Watcher\n\n// 在数据劫持的时候 定义defineProperty 的时候， 已经给每个属性都增加了一个dep\n\n// 找到属性--->对应的watcher，渲染watcher在lifeCycle的update的时候创建\n// 1.先把这个渲染watcher 放到了Dep.target属性上，\n// 2.开始渲染 取值会调用get方法，需要让这个属性的dep 存储当前的watcher\n// 3.页面上所需要的属性都会将这个watcher存在自己的dep中\n// 4.等会属性更新了，就重新调用渲染逻辑 通知自己存储的watcher来更新","import { patch } from \"./vdom/patch\";\nimport Watcher from \"./observer/watcher\";\nexport function lifecycleMixin(Vue) {\n  Vue.prototype._update = function (vnode) {\n    console.log('lifecycle---_update', vnode)\n    const vm = this\n\n    // 用新创建的元素 替换掉老的vm.$el\n    vm.$el = patch(vm.$el, vnode)\n  }\n}\n\n\n// 挂载节点\nexport function mountComponent(vm, el) {\n\n  // 调用render方法去渲染 el属性\n  // 先调用render方法创建虚拟节点，再将虚拟节点渲染到页面上\n  callHook(vm, 'beforeMount')\n  let updateComponent = () => {\n    vm._update(vm._render());\n  }\n  // 这个watcher是用于渲染的 目前没有任何功能 updateComponent()\n  // 初始化就会创建watcher\n  let watcher = new Watcher(vm, updateComponent, () => {\n    callHook(vm, 'beforeUpdate')\n  }, true) // 渲染watcher 只是个名字\n  // vm._update(vm._render());\n\n  // 要把属性 和 watcher绑定在一起\n\n\n  callHook(vm, 'mounted')\n}\n\n\n// callHook(vm, 'beforeCreate')\nexport function callHook(vm, hook) {\n  const handlers = vm.$options[hook]; // vm.$options.created = [a1, a1, a3]\n  if (handlers) {\n    for (let i = 0; i < handlers.length; i++) {\n      handlers[i].call(vm) // 更改生命周期中的this\n\n    }\n  }\n}\n","import Vue from \".\";\nimport { initState } from \"./state\";\nimport { compileToFunctions } from \"./compiler/index\";\nimport { mountComponent, callHook } from \"./lifecycle\";\nimport { mergeOptions } from \"./util\";\n\n// 扩展初始化功能\nexport function initMixin(Vue) {\n\n  // 全局组件和局部组件的区别: 全局组件任何地方都能用\n\n  Vue.prototype._init = function (options) {\n    const vm = this;\n    // vm.$options = mergeOptions(Vue.options, options); \n    vm.$options = mergeOptions(vm.constructor.options, options); // 需要将用户自定义的options 和全局的options做合并\n    console.log('vm.$options', vm.$options)\n    // 1.数据观测初始化(vue源码会先初始化事件和生命周期)\n    // 初始化状态 (将数据做一个初始化的劫持，当改变数据时，应该更新视图)\n    // vue组件中有很多状态 data props watch computed\n    callHook(vm, 'beforeCreate')\n    initState(vm)\n    callHook(vm, 'created')\n    // vue核心：响应式数据原理\n    // MVVM：数据变化视图更新、视图变化影响数据(不能跳过数据更新视图)，$ref能实际直接操作dom\n\n    // 2. ast树解析\n    // 如果当前有el属性说明要渲染模板(el属性，等价于vm.$mount方法)\n    if (vm.$options.el) {\n      // 挂载的逻辑\n      vm.$mount(vm.$options.el)\n    }\n  }\n  Vue.prototype.$mount = function (el) {\n    // 挂载操作\n    const vm = this;\n    const options = vm.$options\n    el = document.querySelector(el)\n    vm.$el = el\n\n    // debugger\n    if (!options.render) {\n      // 没render 将template转化成render方法, render方法优先级比template更高\n      let template = options.template\n      if (!template && el) {\n        template = el.outerHTML\n      }\n      // 有el、有template才做编译的操作，将模板转换成为render函数\n      // 编译原理 将模板编译成render函数，template => render方法\n      // 1.处理模板变为ast树，2.标记静态节点，3.codegen=>return 字符串(把代码生成回js语法)，4.new Fucntion + with(render函数)\n      const render = compileToFunctions(template)\n      options.render = render\n    }\n    // 最终渲染时都是options.render方法\n    console.log('最终渲染时都是options.render方法', options.render)\n    // 需要挂载这个组件\n    mountComponent(vm, el)\n    // console.log('el', el)\n  }\n}","export function renderMixin(Vue) { // 创建虚拟dom，用对象来描述dom的解构\n  Vue.prototype._c = function () { // 创建虚拟dom元素\n    return createElement(...arguments);\n  }\n  // 1.当结果是对象时，会对这个对象取值\n  Vue.prototype._s = function (val) { // stringify\n    return val == null ? '' : (typeof val == 'object') ? JSON.stringify(val) : val;\n  }\n  Vue.prototype._v = function (text) { // 创建虚拟dom文本元素\n    return createTextVnode(text)\n  }\n  Vue.prototype._render = function () { // _render = render\n    const vm = this\n    const render = vm.$options.render\n    let vnode = render.call(vm)\n    console.log('vdom/index/_render--vnode', vnode)\n    return vnode;\n  }\n}\n\n// _c('div', {}, 1,2,3)\nfunction createElement(tag, data = {}, ...children) {\n  // console.log('createElement-arguments', arguments)\n  return vnode(tag, data, data.key, children)\n\n}\nfunction createTextVnode(text) {\n  // console.log('createTextVnode-arguments', arguments)\n  return vnode(undefined, undefined, undefined, undefined, text)\n}\n\n// 用来产生虚拟dom的,ast是根据原代码转换出来的，不会有一些不存在的属性，虚拟dom可以加一些自定义属性\nfunction vnode(tag, data, key, children, text) {\n  return {\n    tag,\n    data,\n    key,\n    children,\n    text,\n    componentsInstance: '',\n    slot: ''\n  }\n}","import { mergeOptions } from \"../util\";\nexport function initGlobalApi(Vue) {\n  Vue.options = {}; // Vue.components Vue.directive定义的这些属性，最终都会放在Vue.options\n  Vue.mixin = function (mixin) {\n    // 合并对象(先考虑生命周期，不考虑data computed watch)\n    this.options = mergeOptions(this.options, mixin)\n    // console.log('initGlobalApi--->mixin', this.options); // this.options = {created: [a, b]}\n  }\n  // new 的时候需要将Vue.options 和 new 传入的options 再合并\n  // 用户 new Vue({create(){}})\n} ","import { initMixin } from './init'\nimport { lifecycleMixin } from \"./lifecycle\";\nimport { renderMixin } from \"./vdom/index\";\nimport { initGlobalApi } from \"./global-api/index\";\n// 老写法，原型方法方便分割在不同的文件中\n\n// 用Vue的构造函数，创建组件\nfunction Vue(options) {\n  // console.log('index.js--->options', options)\n  this._init(options); // 组件初始化的入口，入口方法，做初始化操作\n}\n\n// 原型方法，扩展原型\ninitMixin(Vue) // init方法\nlifecycleMixin(Vue) // 混合生命周期 _update更新渲染和组件挂载(不是vue的生命周期create那些)\nrenderMixin(Vue) // _render\n\n// 静态方法 Vue.component Vue.directive Vue.extend Vue.mixin ...\ninitGlobalApi(Vue)\n\nexport default Vue;\n\n"],"names":["oldArrayProtoMethods","Array","prototype","arrayMethods","Object","create","methods","forEach","method","args","result","apply","inserted","ob","__ob__","slice","observeArray","proxy","vm","data","key","defineProperty","get","set","newValue","target","value","enumerable","configurable","LIFECYCLE_HOOKS","strats","parentVal","childVal","computed","watch","mergeHook","concat","hook","mergeOptions","parent","child","options","console","log","mergeField","hasOwnProperty","Dep","subs","push","watcher","update","pushTarget","popTarget","Observer","isArray","__proto__","walk","item","observe","keys","defineReactive","dep","depend","notify","initState","opts","$options","props","initData","_data","call","unicodeRegExp","attribute","ncname","source","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","parseHTML","html","createASTElement","tagName","attrs","tag","type","children","root","currentParent","stack","start","element","end","pop","length","chars","text","replace","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","attr","name","defaultTagRE","genProps","str","i","obj","split","JSON","stringify","gen","node","generate","test","tokens","lastIndex","index","exec","trim","join","getChildren","el","map","code","compileToFunctions","template","ast","render","Function","patch","oldVnode","vnode","createElm","parentElm","parentNode","insertBefore","nextSibling","removeChild","document","createElement","updateProperties","appendChild","createTextNode","newProps","styleName","style","className","setAttribute","id","Watcher","exprOrFn","cb","getter","lifecycleMixin","Vue","_update","$el","mountComponent","callHook","updateComponent","_render","handlers","initMixin","_init","constructor","$mount","querySelector","outerHTML","renderMixin","_c","arguments","_s","val","_v","createTextVnode","undefined","componentsInstance","slot","initGlobalApi","mixin"],"mappings":"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"}